{% extends "base.html" %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto;">

  <div class="page-header">
    <h2><i data-lucide="sparkles" width="24" height="24"></i> Remix Content</h2>
    <p>Transform your knowledge into different formats with AI</p>
  </div>

  <div class="card mb-4" style="animation: scaleIn var(--speed) ease 0.05s both;">
    <div class="flex justify-between items-center mb-4">
      <h4 style="margin: 0; display: flex; align-items: center; gap: 0.4rem;">
        <i data-lucide="file-text" width="18" height="18" style="color: var(--primary);"></i>
        {{ content.title }}
      </h4>
    </div>
    <form method="post" style="margin-bottom: 0;">
      <label style="margin-bottom: 0.5rem;"><i data-lucide="palette" width="14" height="14"></i> Choose Format</label>
      <div class="remix-formats">
        <label class="remix-option selected" data-value="twitter">
          <input type="radio" name="remix_type" value="twitter" checked>
          <span class="remix-emoji">üê¶</span>
          <span class="remix-label">Twitter Thread</span>
        </label>
        <label class="remix-option" data-value="linkedin">
          <input type="radio" name="remix_type" value="linkedin">
          <span class="remix-emoji">üíº</span>
          <span class="remix-label">LinkedIn Post</span>
        </label>
        <label class="remix-option" data-value="summary">
          <input type="radio" name="remix_type" value="summary">
          <span class="remix-emoji">üìã</span>
          <span class="remix-label">Summary</span>
        </label>
        <label class="remix-option" data-value="ideas">
          <input type="radio" name="remix_type" value="ideas">
          <span class="remix-emoji">üí°</span>
          <span class="remix-label">New Ideas</span>
        </label>
      </div>
      <div style="margin-top: var(--spacing-md);">
        <button type="submit" class="btn" style="width: 100%;">
          <i data-lucide="wand-2" width="16" height="16"></i> Generate Remix
        </button>
      </div>
    </form>
  </div>

  <style>
    .remix-formats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
    }

    .remix-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.3rem;
      padding: 0.75rem 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.22, 1, 0.36, 1);
      text-align: center;
      background: var(--bg-input);
    }

    .remix-option input {
      display: none;
    }

    .remix-option:hover {
      border-color: rgba(139, 92, 246, 0.4);
      background: rgba(139, 92, 246, 0.06);
      transform: translateY(-2px);
    }

    .remix-option.selected {
      border-color: var(--primary);
      background: rgba(139, 92, 246, 0.12);
      box-shadow: 0 0 12px rgba(139, 92, 246, 0.15);
    }

    .remix-emoji {
      font-size: 1.3rem;
      line-height: 1;
    }

    .remix-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-muted);
    }

    .remix-option.selected .remix-label {
      color: #c4b5fd;
    }

    @media (max-width: 480px) {
      .remix-formats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
  <script>
    document.querySelectorAll('.remix-option').forEach(function (opt) {
      opt.addEventListener('click', function () {
        document.querySelectorAll('.remix-option').forEach(function (o) { o.classList.remove('selected'); });
        opt.classList.add('selected');
      });
    });
  </script>

  {% if output %}
  <div class="card" style="animation: fadeInUp 0.5s ease 0.2s both;">
    <div class="flex justify-between items-center mb-4">
      <h4 style="margin: 0; display: flex; align-items: center; gap: 0.4rem;">
        <i data-lucide="check-circle" width="18" height="18" style="color: var(--success);"></i>
        Generated Output
      </h4>
      <button id="copy-btn" class="btn btn-sm btn-secondary" onclick="copyRemix()">
        <i data-lucide="copy" width="12" height="12"></i> Copy to Clipboard
      </button>
    </div>
    <hr>
    <pre id="remix-output" class="remix-output">{{ output }}</pre>
  </div>

  <script>
    function copyRemix() {
      const text = document.getElementById('remix-output').innerText;
      const btn = document.getElementById('copy-btn');
      navigator.clipboard.writeText(text).then(function () {
        btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg> Copied!';
        btn.style.borderColor = 'var(--success)';
        btn.style.color = 'var(--success)';
        setTimeout(function () {
          btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg> Copy to Clipboard';
          btn.style.borderColor = '';
          btn.style.color = '';
        }, 2000);
      });
    }
  </script>
  {% endif %}
</div>
{% endblock %}